<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groups page</title>
    <link rel="icon" href="/images/head.png" type="image/png">
    <link rel="stylesheet" href="/style/common.css">
    <link rel="stylesheet" href="/style/groups.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="header">
        <span><a href="" id="home">Home</a></span>
        <span><a href="" id="group">Groups</a></span>
        <span><a href="" id="problems">Problems</a></span>
        <span><a href="" id="FindProjects">Find Projects/Idea</a></span>
    </div>
    <div id="cGF" class="h-max w-full"></div>
    <div class="groups">
        <div id="btns">
            <div class="btns2">
                <button id="addMemberBtn" onclick="addMember()">Add Member</button>
                <button id="joinGrp" onclick="createGroup()">
                    <img src="/images/images.jpg" alt="Create Logo">
                    Create a Group
                </button>
            </div>
        </div>
        <div id="main">
            <% groupList.forEach((group, index)=> { %>
                <div
                    class="border-2 border-black rounded-lg m-3 w-3/5 h-16 flex items-center justify-between bg-gray-200">
                    <div>
                        <h1 class="text-2xl font-black" id="grpName_<%= index %>">
                            <%= group.grpName %>
                        </h1>
                        <h4 class="text-sm font-black" id="grpDes_<%= index %>">
                            <%= group.groupDes %>
                        </h4>
                    </div>
                    <button class="w-1/5 border-2 border-black rounded-lg flex justify-center items-center h-3/4"
                        onclick="joinChat(<%= JSON.stringify(group) %>, <%= index %>)">Join Chat</button>
                </div>
                <% }) %>
        </div>
    </div>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <script src="/js/group.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
    <script>
        const socket = io();
        socket.on("connect", () => {
        })
        socket.on("newMessage", (text) => {
            const div2 = document.createElement("div")
            console.log(text)
            const messageBox = document.getElementById("messageBox")
            div2.innerText = text.message
            div2.class = "singleMessage"
            div2.innerHTML = `
            <div class="singleMessageHeader"> 
                <span> Message Send By-:${text.user}</span> 
                <span> Time-:${text.time}</span>
            </div>
            `
            messageBox.appendChild(div2)
        });
    </script>
</body>

</html>